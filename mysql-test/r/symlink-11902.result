create table t1 (a int, b char(16));
insert t1 values (100, 'test');
create table t2 (a int, b char(16))
data directory="MYSQLTEST_VARDIR/tmp";
insert t2 values (200, 'some');
select * from t2;
a	b
200	some
flush tables;
set debug_sync='mi_open_datafile WAIT_FOR go';
select * from t2;
set debug_sync='now SIGNAL go';
ERROR HY000: File 'MYSQLTEST_VARDIR/tmp/t2.MYD' not found (Errcode: 40)
flush tables;
drop table t1, t2;
set debug_sync='RESET';
